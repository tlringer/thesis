\documentclass[ twoside,openright,titlepage,numbers=noenddot,headinclude,
                footinclude=true,cleardoublepage=empty,abstractoff,%
                BCOR=5mm,paper=letter,fontsize=11pt,letterpaper,%
                american,%
                ]{scrreprt}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{xspace} % to get the spacing after macros right
\usepackage{mparhack} % get marginpar right
\usepackage{fixltx2e} % fixes some LaTeX stuff
\usepackage[printonlyused,smaller]{acronym}
\usepackage[pdfpagelabels]{hyperref}
\usepackage{graphicx}
\usepackage{tabularx}
\usepackage{etoolbox}
\usepackage{listings}
\usepackage[eulerchapternumbers,parts,linedheaders]{classicthesis}
\usepackage{tikz}
\usepackage{import}
\usepackage{multirow}
\usepackage{amsthm}
\usepackage{supertabular}
\usepackage{subcaption}
\usepackage{mathpartir}
\usepackage{csquotes}
\usepackage{amsfonts}
\usepackage{color,xcolor,colortbl} % colors
\usepackage{chngcntr}
\usepackage[update,prepend]{epstopdf}
\usepackage{rotating}
\usepackage{enumerate}
\usepackage{siunitx}
\usepackage[noend]{algorithm, algorithmic}
\usepackage{flushend}
\usepackage{cleveref}
\usepackage{scalerel} % to render definitional equality
\usepackage{bbm} % to render N for the natural numbers
\usepackage[nounderscore]{syntax} % grammar

\DeclareGraphicsExtensions{.pdf}

\floatname{algorithm}{\footnotesize{Pseudocode:}}

\hypersetup{
    colorlinks=false,
    hidelinks,
    linktocpage=true,
    breaklinks=true,
    hypertexnames=true,
    pdftitle={Proof Engineering Tools for a New Era},
    pdfauthor={\textcopyright\ Talia Ringer, University of Washington},
    pdfsubject={},
    pdfkeywords={},
    pdfcreator={pdfLaTeX},
    pdfproducer={LaTeX with hyperref and classicthesis}
}

\lstdefinelanguage{coq}{
    keywords={Theorem, Proof, Record, Lemma, Definition, Abort, Qed, forall, Inductive, fun, Require, Import, Fixpoint, match, end, with, Qed, Defined,
Parameter, Axiom},
    basicstyle=\linespread{0.95}\small\ttfamily,
    keywordstyle=\color{blue},
    commentstyle=\itshape\rmfamily,
    showstringspaces=false,
    columns=flexible,
    breaklines=true,
    texcl=true,
    mathescape=true,
    tabsize=4,
    stringstyle=\color{brown},
    escapeinside={(@}{@)},
}

\lstdefinelanguage{ocaml}{
    keywords={let, rec, val, if, else, match, with, then, in},
    basicstyle=\linespread{0.95}\small\ttfamily,
    keywordstyle=\color{blue},
    commentstyle=\itshape\rmfamily,
    showstringspaces=false,
    columns=flexible,
    breaklines=true,
    texcl=true,
    mathescape=true,
    tabsize=2,
    stringstyle=\color{brown},
}

\lstdefinelanguage{ml4}{
    keywords={let, rec, val, if, else, match, with, then, in},
    basicstyle=\linespread{0.95}\small\ttfamily,
    keywordstyle=\color{blue},
    commentstyle=\itshape\rmfamily,
    showstringspaces=false,
    columns=flexible,
    breaklines=true,
    texcl=true,
    mathescape=true,
    tabsize=2,
    stringstyle=\color{brown},
}

\lstset{language=coq} % default


\begin{document}
\raggedbottom
\pagenumbering{roman}
\pagestyle{plain}

\newcommand{\sysnamelong}{\textsc{Pumpkin Patch}\xspace}
\newcommand{\sysname}{\textsc{Pumpkin}\xspace}

\newcommand{\ltacforall}{$\color{blue}\forall$\hspace{0.05cm}}
\newcommand{\ltacexists}{$\color{blue}\exists$\hspace{0.05cm}}
\newcommand{\ltacba}{\textcolor{magenta}{-}\hspace{-0.03cm}}
\newcommand{\ltacbb}{\textcolor{magenta}{+}\hspace{-0.03cm}}
\newcommand{\ltacbc}{\textcolor{magenta}{*}\hspace{-0.03cm}}
\newcommand{\remove}[1]{\textcolor{lightgray}{#1}}
\newcommand{\fails}[1]{#1\textcolor{red}{\textbf{\sffamily X}}}
\newcommand{\succeeds}[1]{#1\textcolor{teal}{\textbf{\checkmark}}}
\newcommand{\reducedstrut}{\vrule width 0pt height .9\ht\strutbox depth .9\dp\strutbox\relax}
\newcommand{\diff}[1]{%
  \begingroup
  \setlength{\fboxsep}{0pt}%  
  \colorbox{orange!35}{\reducedstrut#1\/}%
  \endgroup
}
\newcommand{\inv}{^{\raisebox{0.2ex}{$\scriptscriptstyle-1$}}}
\newcommand{\IFRETURN}[2]{\STATE \algorithmicif\ {#1}\ \algorithmicthen\ \textbf{return} {#2} }
\newcommand{\RETURNIFELSE}[3]{\IF {#1} \THEN \STATE \textbf{return} {#2} \ELSE \STATE \textbf{return} {#3}}

% TODO color consistency etc

% acronyms
\newcommand\toolname{\textsc{REPLica}\xspace}

% highlighting with boxes
\newcommand{\codediff}[1]{%
  \begingroup
  \setlength{\fboxsep}{0pt}%  
  \colorbox{green!25}{\reducedstrut#1\/}%
  \endgroup
}
\newcommand{\indpatt}[1]{%
  \begingroup
  \setlength{\fboxsep}{0pt}%  
  \colorbox{blue!30}{\reducedstrut#1\/}%
  \endgroup
}
\newcommand{\refactorpatt}[1]{%
  \begingroup
  \setlength{\fboxsep}{0pt}%  
  \colorbox{orange!60}{\reducedstrut#1\/}%
  \endgroup
}
\newcommand{\repairpatt}[1]{%
  \begingroup
  \setlength{\fboxsep}{0pt}%  
  \colorbox{purple!70}{\reducedstrut#1\/}%
  \endgroup
}
\newcommand{\pddpatt}[1]{%
  \begingroup
  \setlength{\fboxsep}{0pt}%  
  \colorbox{gray!30}{\reducedstrut#1\/}%
  \endgroup
}

% Table highlighting
\newcommand{\indpat}[1]{\cellcolor{blue!30}{#1}} % extending inductive types
\newcommand{\refactorpat}[1]{\cellcolor{orange!60}{#1}} % refactoring
\newcommand{\repairpat}[1]{\cellcolor{purple!70}{#1}} % repair
\newcommand{\pddpat}[1]{\cellcolor{gray!20}{#1}} % proof-driven development
\newcommand{\na}[1]{\cellcolor{black!50}{#1}} % N/A
\newcommand{\todo}[1]{}


% https://tex.stackexchange.com/questions/4216/how-to-typeset-correctly
\newcommand\defeq{\equiv_{\scaleto{\beta\delta\iota}{4pt}}} % definitional equality
\newcommand{\smallmath}[1]{$\text{\small #1}$} % inline math looks terrible at normal size
\newcommand\Aa{\smallmath{$A$}} % recurring type A
\newcommand\B{\smallmath{$B$}} % recurring type B
\newcommand\IB{\smallmath{$I_B$}} % recurring type I_B
\newcommand\sigT{\smallmath{$\Sigma$}} % sigma types
\newcommand\exT{\smallmath{$\exists$}} % existentials
\newcommand\Pil{\smallmath{$\pi_l$}} % left projection
\newcommand\Pir{\smallmath{$\pi_r$}} % right projection
\newcommand\toolnameb{\textsc{Devoid}\xspace} % DEVOID tool name
\newcommand{\codeauto}[1]{%
  \begingroup
  \setlength{\fboxsep}{0pt}%
  \colorbox{cyan!30}{\reducedstrut#1\/}%
  \endgroup
} % to highlight automatically-generated terms

\definecolor{thecolor}{RGB}{38,90,18}
 
%
% ----- copyright and title pages
%
% TITLE PAGE
\begin{titlepage}
	% if you want the titlepage to be centered, uncomment and fine-tune the line below (KOMA classes environment)
	\begin{addmargin}[-1cm]{-3cm}
    \begin{center}
        \large
        \hfill
        \vfill
        \begingroup
            \color{thecolor}\spacedallcaps{Proof Engineering Tools} \\
            \color{thecolor}\spacedallcaps{for a New Era} \\ \bigskip
        \endgroup
        \spacedlowsmallcaps{Talia Ringer}
        \vfill
        A dissertation \\
        submitted in partial fulfillment of the \\
        requirements for the degree of \\
        \medskip
        Doctor of Philosophy \\
        \bigskip
        University of Washington \\
        \smallskip
        2021
        \vfill
        Reading Committee: \\
        \smallskip
        TODO, Chair \\
        \smallskip
        TODO \\
        \smallskip
        TODO
        \vfill
        Program Authorized to Offer Degree: \\
        \smallskip
        Computer Science \& Engineering
    \end{center}
  \end{addmargin}
\end{titlepage}


% COPYRIGHT PAGE
\cleardoublepage
\thispagestyle{empty}
\begin{center}
    \vspace*{20ex}
    \textcopyright\ Copyright 2021 \\
    \bigskip
    Talia Ringer
\end{center}
 
%
% ----- signature and quoteslip are gone
%

%
% ----- abstract
%
% ABSTRACT
\cleardoublepage
\thispagestyle{empty}
\pdfbookmark[1]{Abstract}{Abstract}

\begin{center}
    \spacedlowsmallcaps{Abstract} \\
    \bigskip
    {\color{thecolor}
    \spacedallcaps{Proof Engineering Tools} \\
    \spacedallcaps{for a New Era} \\
    }
    \bigskip
    Talia Ringer \\
    \bigskip
    Chairs of the Supervisory Committee: \\
    TODO \\
    Computer Science \& Engineering \\
    \bigskip
\end{center}

Abstract will go here.

% DEDICATION
\cleardoublepage
\thispagestyle{empty}
%\phantomsection
%\refstepcounter{dummy}
\pdfbookmark[1]{Dedication}{Dedication}
\vspace*{3cm}
\begin{center}
    To my parents. Hope this fits on your fridge.
\end{center}
 
\cleardoublepage

% CONTENTS
\renewcommand{\contentsname}{Contents}
\pagestyle{scrheadings}
\setcounter{tocdepth}{1} % <-- 2 includes up to subsections in the ToC
\setcounter{secnumdepth}{3} % <-- 3 numbers up to subsubsections
\manualmark
\markboth{\spacedlowsmallcaps{\contentsname}}{\spacedlowsmallcaps{\contentsname}}
\phantomsection
\pdfbookmark[1]{\contentsname}{tableofcontents}

\tableofcontents


% Resturn to ordinary header marks.
\automark[section]{chapter}
\renewcommand{\chaptermark}[1]{\markboth{\spacedlowsmallcaps{#1}}{\spacedlowsmallcaps{#1}}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\enspace\spacedlowsmallcaps{#1}}}
\clearpage

\cleardoublepage


% ACKS
\cleardoublepage
\pdfbookmark[1]{Acknowledgments}{acknowledgments}
\chapter*{Acknowledgments}
I've always believed the acknowledgments section to be one of the most important parts of a paper.
But there's never enough room to thank everyone I want to thank.
Now that I have the chance---where do I begin?

Dan, Jeff Foster, Zach, Derek, Alexandra, the Coq community (Emilio J. Gallego Arias, Enrico Tassi, Ga\"{e}tan Gilbert, Maxime D\'{e}n\`{e}s,
Matthieu Sozeau, Vincent Laporte, Th\'{e}o Zimmermann, Jason Gross, Nicolas Tabareau, Cyril Cohen, Pierre-Marie P\'{e}drot, Yves Bertot, Tej Chajed), coauthors, Valentin, Carlo, my family, PLSE lab (especially Chandra oh my gosh), James Wilcox, Jasper Hugunin, Marisa Kirisame,
UCSD Programming Systems group, Misha,
PL Twitter, students, Qi.

\pagenumbering{arabic}
\cleardoublepage

% TODO can use "parts" here instead of just chapters
 
\input{intro}

\input{development}

\input{maintenance}

\input{repair}

\input{often}

\input{theory}

\input{next}

%
% ==========   Bibliography
%
\nocite{*}   % include everything in the uwthesis.bib file
\bibliographystyle{plain}
\bibliography{uwthesis}

\end{document}
